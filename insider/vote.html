<!DOCTYPE html>

<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" href="index.css">
    <script>
        osql.requireLogin();

        var room = sessionStorage.getItem('room');
        display();
        async function display() {
            var sql = `select theme from Rooms where id = "${room}" `; //参加ルームのお題をルームテーブルからとってくる
            var objects = await osql.connect(sql);
            console.log(objects)
            var answernum = objects[0]['theme']


            var sql2 = `select theme from Themes where num="${answernum}" `; //お題名取得
            var objects2 = await osql.connect(sql2);
            console.log(objects);
            var answertheme = objects2[0]['theme']
            document.getElementById('theme3') = answertheme;
        }

        var room = sessionStorage.getItem('room');
        memberArray = []
        $(document).ready(function () {
            insiderSelect();
        });

        async function insiderSelect() {
            // メンバーの名前が入った配列か何か作って、そこからインデクス指定して、投票者のところにメンバー名出すようにしたい　あとですすめる
            var sql = `select userid from Roles where roomid = "${room}" `; //ルームの参加者
            var objects = await osql.connect(sql);
            console.log(objects)
            for (let i = 0; i++; i < objects.length) { // ルーム数絞って出てきた人の名前の数繰り返したい　多分object.lentghじゃない
                var memberid = objects[i]['userid']
                memberArray.push(memberid)
                // for文の中にsql入れていいのか
            }
            console.log(memberArray)

        }


    </script>
</head>

<body>
    <p class="title">インサイダーゲーム</p>
    <p>お題は
        <span id="theme3"></span>でした
    </p>
    <p>プレイヤーの解答</p>
    <table id="table2">
        <!--   <tr><td>プレイヤー</td><td>いよかん</td><td>スコア</td></tr>  -->


        <p>インサイダー投票</p>
        <p>インサイダーだと思う人に投票してください</p>投票？選ぶの方が良いか？
        <table id="table3">
            <!--
        <tr><td>プレイヤー名</td>
        <td><input type="button" id="guessIns" value="選択"></td></tr>
    -->
</body>

</html>